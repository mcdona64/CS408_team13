cah.card={};cah.card.serial=0;cah.card.BaseCard=function(opt_faceUp,opt_id){this.id_=cah.card.serial++;this.serverId_=opt_id;this.faceUp_=!!opt_faceUp;this.faceDownElem_=undefined;this.faceUpElem_=undefined;this.element_=$('<div id="card_'+ this.id_+'" class="card_holder"><br/></div>')[0];if(this.faceUp_){this.turnFaceUp();}else{this.turnFaceDown();}};cah.card.BaseCard.prototype.turnFaceUp=function(){this.ensureFaceUpElement_();$(this.element_).empty().append(this.faceUpElem_);this.faceUp_=true;};cah.card.BaseCard.prototype.turnFaceDown=function(){this.ensureFaceDownElement_();$(this.element_).empty().append(this.faceDownElem_);this.faceUp_=false;};cah.card.BaseCard.prototype.getFaceDown_=function(){throw"Abstract method invoked.";};cah.card.BaseCard.prototype.getFaceUp_=function(){throw"Abstract method invoked.";};cah.card.BaseCard.prototype.setText=function(text){this.ensureFaceUpElement_();$(".card_text",this.faceUpElem_).html(text);$(".card_text",this.faceUpElem_).attr("aria-label",text.replace("____","blank").replace("&trade;","").replace("&reg;","").replace("&amp;","and"));};cah.card.BaseCard.prototype.getAriaText=function(){return $(".card_text",this.faceUpElem_).attr("aria-label");};cah.card.BaseCard.prototype.setWatermark=function(watermark){this.ensureFaceUpElement_();$(".watermark",this.faceUpElem_).text(watermark);};cah.card.BaseCard.prototype.ensureFaceUpElement_=function(){if(!this.faceUpElem_){this.faceUpElem_=this.getFaceUp_();$(".logo_1",this.faceUpElem_).animate({rotate:"-13deg",},{duration:0,queue:false,});$(".logo_3",this.faceUpElem_).animate({rotate:"13deg",},{duration:0,queue:false,});}};cah.card.BaseCard.prototype.ensureFaceDownElement_=function(){if(!this.faceDownElem_){this.faceDownElem_=this.getFaceDown_();}};cah.card.BaseCard.prototype.getServerId=function(){return this.serverId_;};cah.card.BaseCard.prototype.getElement=function(){return this.element_;};cah.card.BlackCard=function(opt_faceUp,opt_id){cah.card.BaseCard.call(this,opt_faceUp,opt_id);this.draw_=0;this.pick_=1;};cah.inherits(cah.card.BlackCard,cah.card.BaseCard);cah.card.BlackCard.prototype.getFaceDown_=function(){var temp=$("#black_down_template").clone()[0];temp.id="black_down_"+ this.id_;$(temp).removeClass("hide");return temp;};cah.card.BlackCard.prototype.getFaceUp_=function(){var temp=$("#black_up_template").clone()[0];temp.id="black_up_"+ this.id_;$(temp).removeClass("hide");return temp;};cah.card.BlackCard.prototype.setDraw=function(draw){this.draw_=draw;this.updateCardInfo_();};cah.card.BlackCard.prototype.setPick=function(pick){this.pick_=pick;this.updateCardInfo_();};cah.card.BlackCard.prototype.updateCardInfo_=function(){if(this.draw_!=0||this.pick_!=1){$(".logo_text",this.faceUpElem_).text("PYX");if(this.draw_!=0){$(".draw .card_number",this.faceUpElem_).text(this.draw_);$(".draw",this.faceUpElem_).removeClass("hide");}else{$(".draw",this.faceUpElem_).addClass("hide");}
if(this.pick_!=1){$(".pick .card_number",this.faceUpElem_).text(this.pick_);$(".pick",this.faceUpElem_).removeClass("hide");}else{$(".pick",this.faceUpElem_).addClass("hide");}}else{$(".logo_text",this.faceUpElem_).text("Pretend You're Xyzzy");}};cah.card.WhiteCard=function(opt_faceUp,opt_id){cah.card.BaseCard.call(this,opt_faceUp,opt_id);this.isBlankCard_=false;};cah.inherits(cah.card.WhiteCard,cah.card.BaseCard);cah.card.WhiteCard.prototype.setIsBlankCard=function(blank){this.isBlankCard_=blank;};cah.card.WhiteCard.prototype.isBlankCard=function(){return this.isBlankCard_;};cah.card.WhiteCard.prototype.getFaceDown_=function(){var temp=$("#white_down_template").clone()[0];temp.id="white_down_"+ this.id_;$(temp).removeClass("hide");return temp;};cah.card.WhiteCard.prototype.getFaceUp_=function(){var temp=$("#white_up_template").clone()[0];temp.id="white_up_"+ this.id_;$(temp).removeClass("hide");return temp;};